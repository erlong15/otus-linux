# Дано

Vagrantfile с начальным  построением сети
inetRouter
centralRouter
centralServer

тестировалось на virtualbox

## Планируемая архитектура

построить следующую архитектуру

Сеть office1

- 192.168.2.0/26      - dev
- 192.168.2.64/26    - test servers
- 192.168.2.128/26  - managers
- 192.168.2.192/26  - office hardware

Сеть office2

- 192.168.1.0/25      - dev
- 192.168.1.128/26  - test servers
- 192.168.1.192/26  - office hardware

Сеть central

- 192.168.0.0/28    - directors
- 192.168.0.32/28  - office hardware
- 192.168.0.64/26  - wifi

```txt
Office1 ---\
      -----> Central --IRouter --> internet
Office2----/
```

Итого должны получится следующие сервера

- inetRouter
- centralRouter
- office1Router
- office2Router
- centralServer
- office1Server
- office2Server

## Теоретическая часть

- Найти свободные подсети
- Посчитать сколько узлов в каждой подсети, включая свободные
- Указать broadcast адрес для каждой подсети
- проверить нет ли ошибок при разбиении

## Практическая часть

- Соединить офисы в сеть согласно схеме и настроить роутинг
- Все сервера и роутеры должны ходить в инет черз inetRouter
- Все сервера должны видеть друг друга
- у всех новых серверов отключить дефолт на нат (eth0), который вагрант поднимает для связи
- при нехватке сетевых интервейсов добавить по несколько адресов на интерфейс

## Отеты на теоретическую часть

### Найти свободные подсети

- Сеть central

    ```txt
    192.168.0.128/25 - newnet1
    192.168.0.16/28 - newnet2
    192.168.0.48/28 - newnet3
    ```

- Сеть office2 заполнены вся /24
- Сеть office1 заполнены вся /24

### ответы на вопросы

| net   | all host   |   broadcast | name  | name net |
|---                |---|---|---|---|
|192.168.2.0/26     | 62| 192.168.2.63   |office1| dev
|192.168.2.64/26    |62 | 192.168.2.127  |office1| test servers
|192.168.2.128/26   | 62| 192.168.2.191  |office1| managers
|192.168.2.192/26   | 62| 192.168.2.255  |office1|office hardware
|192.168.1.0/25     | 126| 192.168.1.127 |office2| dev
|192.168.1.128/26   | 62| 192.168.1.191  |office2| test servers
|192.168.1.192/26   |62 | 192.168.1.255  |office2| office hardware
|192.168.0.0/28     | 14| 192.168.0.15   |central|directors
|192.168.0.16/28    | 14| 192.168.0.31   |central| newnet2
|192.168.0.32/28    |14 | 192.168.0.47   |central|office hardware
|192.168.0.48/28    | 14| 192.168.0.63   |central| newnet3
|192.168.0.64/26    |62 | 192.168.0.127  |central| wifi
|192.168.0.128/25   | 126|192.168.0.255  |central| newnet1
|192.168.255.0/30 | 2| 192.168.255.3 |point to point  | centralRO - inetRO
|192.168.255.4/30 | 2| 192.168.255.7 |point to point  | centralRO - Ofise1RO
|192.168.255.8/30 | 2| 192.168.255.11 |point to point  | centralRO - Ofise2RO

### Запуск стенда

- установка Ansible

    ```bash
    cd HW_17
    python3.8 -m venv venv
    source venv/bin/activate
    pip install --upgrade pip
    pip install -r requirements.txt
    ```

- Запуск виртуальных машин и настройка окружения. В связи с тем, что странно себя ведет перезагрузка network
  - окружение запускается 13 минут

    ```bash
    make install
    ```

- Запуск теста доступности, проверяет доступность IP  с разных хостов другие
 хосты и интернет + трасировка.
  - тест проверяется минуту

    ```bash
    make test
    ```
